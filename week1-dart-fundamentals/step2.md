# √âtape 2 : Fonctions en Dart

## IMPORTANT: V√©rifier l'environnement

### Commande 1 : Aller dans votre dossier de projet

`cd /root/mon_projet_dart`{{execute}}

### Commande 2 : V√©rifier que Dart fonctionne

`dart --version`{{execute}}

**Vous devez voir:** `Dart SDK version: 3.x.x`

---

## Qu'est-ce qu'une Fonction? üîß

### Analogie Simple

Imaginez une **machine √† caf√©**:
- **Entr√©e:** Vous mettez de l'eau et du caf√©
- **Processus:** La machine fait son travail
- **Sortie:** Vous obtenez un caf√©!

**Une fonction en programmation, c'est pareil!**
- **Entr√©e:** Param√®tres (donn√©es)
- **Processus:** Code qui s'ex√©cute
- **Sortie:** R√©sultat (valeur de retour)

### Pourquoi Utiliser des Fonctions?

**1. √âviter la r√©p√©tition (DRY: Don't Repeat Yourself)**
```dart
// SANS fonction (r√©p√©titif)
print('Bonjour Julie!');
print('Bonjour Marc!');
print('Bonjour Sophie!');

// AVEC fonction (r√©utilisable)
direBonjour('Julie');
direBonjour('Marc');
direBonjour('Sophie');
```

**2. Organiser le code**
- Code plus lisible
- Plus facile √† maintenir
- Plus facile √† d√©bugger

**3. R√©utiliser le code**
- √âcrivez une fois
- Utilisez partout!

---

## Anatomie d'une Fonction

```dart
returnType nomDeLaFonction(param√®tres) {
  // Code de la fonction
  return r√©sultat;
}
```

### Les Parties:

**1. Type de retour (`returnType`):**
- `void` si ne retourne rien
- `int`, `String`, `double`, `bool` si retourne quelque chose

**2. Nom (`nomDeLaFonction`):**
- En camelCase
- Verbe descriptif (ex: `calculer`, `afficher`, `obtenir`)

**3. Param√®tres:**
- Entre parenth√®ses `( )`
- Peuvent √™tre vides
- Type + nom: `int age`, `String nom`

**4. Corps:**
- Entre accolades `{ }`
- Code qui s'ex√©cute

**5. Retour (optionnel):**
- `return` + valeur
- Si type de retour n'est pas `void`

---

## Fonction Simple : Sans Param√®tres, Sans Retour

### Exemple

```dart
void direBonjour() {
  print('Bonjour tout le monde!');
}

void main() {
  direBonjour();  // Appel de la fonction
  direBonjour();  // On peut l'appeler plusieurs fois!
}
```

**Explication:**
- `void` = ne retourne rien
- `direBonjour()` = nom de la fonction (pas de param√®tres)
- `print(...)` = code qui s'ex√©cute
- `direBonjour();` = appel de la fonction

---

## EXERCICE 1 : Votre Premi√®re Fonction üéØ

### √âTAPE 1.1 - Cr√©er le fichier

`nano premiere_fonction.dart`{{execute}}

---

### √âTAPE 1.2 - Taper le code

```dart
// D√©finir la fonction
void afficherMessage() {
  print('===============');
  print('Bienvenue en Dart!');
  print('===============');
}

void main() {
  // Appeler la fonction 3 fois
  afficherMessage();
  print('');  // Ligne vide
  afficherMessage();
  print('');
  afficherMessage();
}
```

---

### √âTAPE 1.3 - Comprendre ce code

**Lignes 2-6:** D√©finition de la fonction
- On cr√©e une fonction nomm√©e `afficherMessage`
- Elle ne prend pas de param√®tres `()`
- Elle ne retourne rien (`void`)
- Elle affiche 3 lignes

**Lignes 8-15:** Fonction main
- On appelle `afficherMessage()` 3 fois
- M√™me code, 3 ex√©cutions diff√©rentes!

**AVANTAGE:** Si on veut changer le message, on le change UNE SEULE FOIS dans la fonction!

---

### √âTAPE 1.4 - Ex√©cuter

1. Sauvegarder: `Ctrl + O` puis `Entr√©e`
2. Quitter: `Ctrl + X`
3. `dart premiere_fonction.dart`{{execute}}

**R√âSULTAT ATTENDU:**
```
===============
Bienvenue en Dart!
===============

===============
Bienvenue en Dart!
===============

===============
Bienvenue en Dart!
===============
```

**SI VOUS VOYEZ √áA:** üéâ Votre premi√®re fonction marche!

---

## Fonction avec Param√®tres : Entr√©es Personnalis√©es

### Exemple

```dart
void direBonjour(String prenom) {
  print('Bonjour $prenom!');
}

void main() {
  direBonjour('Julie');   // Bonjour Julie!
  direBonjour('Marc');    // Bonjour Marc!
  direBonjour('Sophie');  // Bonjour Sophie!
}
```

**Explication:**
- `String prenom` = param√®tre (entr√©e de la fonction)
- `direBonjour('Julie')` = on passe 'Julie' comme argument
- La fonction re√ßoit 'Julie', le met dans `prenom`, et l'utilise

**Vocabulaire:**
- **Param√®tre:** Variable dans la d√©finition (`String prenom`)
- **Argument:** Valeur lors de l'appel (`'Julie'`)

---

## EXERCICE 2 : Fonction avec Param√®tres üéØ

### √âTAPE 2.1 - Cr√©er le fichier

`nano avec_parametres.dart`{{execute}}

---

### √âTAPE 2.2 - Taper le code

```dart
// Fonction avec UN param√®tre
void presenterPersonne(String nom) {
  print('Je m\'appelle $nom.');
}

// Fonction avec PLUSIEURS param√®tres
void presenterComplet(String nom, int age, String ville) {
  print('Je m\'appelle $nom.');
  print('J\'ai $age ans.');
  print('J\'habite √† $ville.');
  print('---');
}

void main() {
  // Appeler avec un param√®tre
  presenterPersonne('Julie');
  print('');
  
  // Appeler avec plusieurs param√®tres
  presenterComplet('Marc', 30, 'Paris');
  presenterComplet('Sophie', 25, 'Lyon');
  presenterComplet('Thomas', 35, 'Marseille');
}
```

---

### √âTAPE 2.3 - Comprendre les param√®tres multiples

**Ligne 7:** `void presenterComplet(String nom, int age, String ville)`
- **3 param√®tres** s√©par√©s par des virgules
- Chaque param√®tre a un **type** et un **nom**
- Ordre important!

**Ligne 20:** `presenterComplet('Marc', 30, 'Paris');`
- **3 arguments** dans le M√äME ordre
- `'Marc'` ‚Üí `nom`
- `30` ‚Üí `age`
- `'Paris'` ‚Üí `ville`

**‚ö†Ô∏è ATTENTION √Ä L'ORDRE:**
```dart
presenterComplet('Marc', 30, 'Paris');     // ‚úÖ Correct
presenterComplet(30, 'Marc', 'Paris');     // ‚ùå Erreur de type!
```

---

### √âTAPE 2.4 - Ex√©cuter

1. `Ctrl + O` puis `Entr√©e`
2. `Ctrl + X`
3. `dart avec_parametres.dart`{{execute}}

**R√âSULTAT ATTENDU:**
```
Je m'appelle Julie.

Je m'appelle Marc.
J'ai 30 ans.
J'habite √† Paris.
---
Je m'appelle Sophie.
J'ai 25 ans.
J'habite √† Lyon.
---
Je m'appelle Thomas.
J'ai 35 ans.
J'habite √† Marseille.
---
```

**Vous voyez la puissance?** Une fonction, plusieurs utilisations! üéØ

---

## Fonction avec Retour : Produire un R√©sultat

### Exemple

```dart
int additionner(int a, int b) {
  int resultat = a + b;
  return resultat;
}

void main() {
  int somme = additionner(5, 3);
  print('5 + 3 = $somme');  // 5 + 3 = 8
}
```

**Explication:**
- `int` (avant le nom) = type de retour
- `return resultat;` = renvoie la valeur
- `int somme = additionner(5, 3);` = r√©cup√®re le r√©sultat

**La fonction RETOURNE une valeur qu'on peut stocker dans une variable!**

---

## EXERCICE 3 : Fonctions Math√©matiques üßÆ

### √âTAPE 3.1 - Cr√©er le fichier

`nano calculatrice.dart`{{execute}}

---

### √âTAPE 3.2 - Taper le code

```dart
// Fonction qui retourne la somme
int additionner(int a, int b) {
  return a + b;
}

// Fonction qui retourne le produit
int multiplier(int a, int b) {
  return a * b;
}

// Fonction qui retourne le double d'un nombre
int doubler(int nombre) {
  return nombre * 2;
}

// Fonction qui retourne l'aire d'un rectangle
int calculerAire(int longueur, int largeur) {
  int aire = longueur * largeur;
  return aire;
}

void main() {
  // Utiliser les fonctions
  print('Addition: 5 + 3 = ${additionner(5, 3)}');
  print('Multiplication: 5 √ó 3 = ${multiplier(5, 3)}');
  print('Double de 7: ${doubler(7)}');
  
  // Stocker le r√©sultat dans une variable
  int resultat = calculerAire(10, 5);
  print('Aire d\'un rectangle 10√ó5: $resultat cm¬≤');
  
  // Utiliser un r√©sultat dans un calcul
  int somme = additionner(10, 20);
  int doubleSomme = doubler(somme);
  print('10 + 20 = $somme, doubl√© = $doubleSomme');
}
```

---

### √âTAPE 3.3 - Comprendre le retour de valeurs

**Ligne 3:** `return a + b;`
- Calcule `a + b`
- **Retourne** le r√©sultat
- La fonction se termine imm√©diatement

**Ligne 24:** `${additionner(5, 3)}`
- Appelle la fonction
- Re√ßoit le r√©sultat (8)
- L'ins√®re dans le String

**Lignes 32-34:** Composition de fonctions
- `additionner(10, 20)` retourne `30`
- `doubler(30)` retourne `60`
- On peut utiliser le r√©sultat d'une fonction dans une autre!

---

### √âTAPE 3.4 - Ex√©cuter

1. `Ctrl + O` puis `Entr√©e`
2. `Ctrl + X`
3. `dart calculatrice.dart`{{execute}}

**R√âSULTAT ATTENDU:**
```
Addition: 5 + 3 = 8
Multiplication: 5 √ó 3 = 15
Double de 7: 14
Aire d'un rectangle 10√ó5: 50 cm¬≤
10 + 20 = 30, doubl√© = 60
```

---

## Fonction avec Retour de Type `String` üìù

```dart
String creerMessage(String nom, int age) {
  return 'Bonjour $nom, vous avez $age ans!';
}

void main() {
  String message1 = creerMessage('Julie', 25);
  String message2 = creerMessage('Marc', 30);
  
  print(message1);
  print(message2);
}
```

**Les fonctions peuvent retourner N'IMPORTE QUEL type!**
- `int`, `double`, `String`, `bool`, etc.

---

## EXERCICE 4 : Convertisseur de Temp√©rature üå°Ô∏è

### Objectif
Cr√©er des fonctions pour convertir Celsius ‚Üî Fahrenheit.

---

### √âTAPE 4.1 - Cr√©er le fichier

`nano temperature.dart`{{execute}}

---

### √âTAPE 4.2 - Taper le code

```dart
// Convertir Celsius en Fahrenheit
// Formule: F = C √ó 9/5 + 32
double celsiusVersFahrenheit(double celsius) {
  double fahrenheit = celsius * 9 / 5 + 32;
  return fahrenheit;
}

// Convertir Fahrenheit en Celsius
// Formule: C = (F - 32) √ó 5/9
double fahrenheitVersCelsius(double fahrenheit) {
  double celsius = (fahrenheit - 32) * 5 / 9;
  return celsius;
}

// Afficher une temp√©rature avec ses deux valeurs
void afficherTemperature(double celsius) {
  double fahrenheit = celsiusVersFahrenheit(celsius);
  print('$celsius¬∞C = $fahrenheit¬∞F');
}

void main() {
  // Tester les conversions
  print('=== CONVERSIONS DE TEMP√âRATURE ===');
  print('');
  
  afficherTemperature(0);     // Point de cong√©lation de l'eau
  afficherTemperature(100);   // Point d'√©bullition de l'eau
  afficherTemperature(37);    // Temp√©rature corporelle normale
  afficherTemperature(-40);   // -40¬∞C = -40¬∞F (fait rigolo!)
  
  print('');
  print('=== CONVERSION INVERSE ===');
  double tempC = fahrenheitVersCelsius(98.6);
  print('98.6¬∞F = $tempC¬∞C (temp√©rature corporelle)');
}
```

---

### √âTAPE 4.3 - Comprendre les types `double`

**Pourquoi `double` et pas `int`?**
- Les temp√©ratures peuvent avoir des d√©cimales: 37.5¬∞C
- Les divisions donnent souvent des d√©cimales
- `double` est plus pr√©cis pour les calculs scientifiques

**Ligne 4:** `double fahrenheit = celsius * 9 / 5 + 32;`
- `/` en Dart donne toujours un `double`
- M√™me `10 / 5` donne `2.0` (pas `2`)

---

### √âTAPE 4.4 - Ex√©cuter

1. `Ctrl + O` puis `Entr√©e`
2. `Ctrl + X`
3. `dart temperature.dart`{{execute}}

**R√âSULTAT ATTENDU:**
```
=== CONVERSIONS DE TEMP√âRATURE ===

0.0¬∞C = 32.0¬∞F
100.0¬∞C = 212.0¬∞F
37.0¬∞C = 98.6¬∞F
-40.0¬∞C = -40.0¬∞F

=== CONVERSION INVERSE ===
98.6¬∞F = 37.0¬∞C (temp√©rature corporelle)
```

**Fun fact:** -40¬∞C = -40¬∞F ! C'est le seul point o√π les deux √©chelles se croisent! ‚ùÑÔ∏è

---

## Param√®tres Nomm√©s : Plus de Clart√©

### Syntaxe

```dart
void creerProfil({required String nom, required int age, String? ville}) {
  print('Nom: $nom');
  print('Age: $age');
  if (ville != null) {
    print('Ville: $ville');
  }
}

void main() {
  // Appel avec param√®tres nomm√©s
  creerProfil(nom: 'Julie', age: 25, ville: 'Paris');
  creerProfil(nom: 'Marc', age: 30);  // ville optionnel
}
```

**Avantages:**
- Ordre n'a pas d'importance!
- Plus lisible
- Param√®tres optionnels faciles

**Syntaxe:**
- `{ }` autour des param√®tres
- `required` pour les obligatoires
- `?` pour les optionnels (peuvent √™tre `null`)

---

## Valeurs par D√©faut

```dart
void direBonjour({String nom = 'Invit√©', String langue = 'FR'}) {
  if (langue == 'FR') {
    print('Bonjour $nom!');
  } else if (langue == 'EN') {
    print('Hello $nom!');
  } else {
    print('Hola $nom!');
  }
}

void main() {
  direBonjour();                        // Bonjour Invit√©!
  direBonjour(nom: 'Julie');            // Bonjour Julie!
  direBonjour(nom: 'John', langue: 'EN'); // Hello John!
}
```

**Si vous ne passez pas d'argument, la valeur par d√©faut est utilis√©e!**

---

## ‚ö†Ô∏è ATTENTION: Erreurs Courantes

### Erreur #1: Retourner void

**CODE AVEC ERREUR:**
```dart
void calculer(int a, int b) {
  return a + b;  // ‚ùå void ne peut pas retourner!
}
```

**ERREUR DART:**
```
Error: Can't return a value from a void function.
```

**SOLUTION:**
```dart
int calculer(int a, int b) {  // ‚úÖ int, pas void
  return a + b;
}
```

---

### Erreur #2: Oublier return

**CODE AVEC ERREUR:**
```dart
int additionner(int a, int b) {
  a + b;  // ‚ùå Calcule mais ne retourne pas!
}
```

**ERREUR DART:**
```
Error: A value of type 'int' was expected but 'void' was returned.
```

**SOLUTION:**
```dart
int additionner(int a, int b) {
  return a + b;  // ‚úÖ Avec return
}
```

---

### Erreur #3: Mauvais type de retour

**CODE AVEC ERREUR:**
```dart
int diviser(int a, int b) {
  return a / b;  // ‚ùå Division retourne double, pas int!
}
```

**ERREUR DART:**
```
Error: A value of type 'double' can't be returned from a function with return type 'int'.
```

**SOLUTION:**
```dart
double diviser(int a, int b) {  // ‚úÖ double
  return a / b;
}
```

---

### Erreur #4: Mauvais nombre d'arguments

**CODE AVEC ERREUR:**
```dart
int additionner(int a, int b) {
  return a + b;
}

void main() {
  additionner(5);  // ‚ùå Manque un argument!
}
```

**ERREUR DART:**
```
Error: Too few positional arguments: 2 required, 1 given.
```

**SOLUTION:**
```dart
additionner(5, 3);  // ‚úÖ 2 arguments
```

---

## R√©capitulatif : Ce que Vous Avez Appris üìö

### Concepts Cl√©s:
‚úÖ **Fonction** = bloc de code r√©utilisable
‚úÖ **Param√®tre** = entr√©e de la fonction
‚úÖ **Argument** = valeur pass√©e √† la fonction
‚úÖ **return** = sortie de la fonction
‚úÖ **void** = fonction qui ne retourne rien

### Types de Fonctions:
‚úÖ Sans param√®tres, sans retour
‚úÖ Avec param√®tres, sans retour
‚úÖ Sans param√®tres, avec retour
‚úÖ Avec param√®tres et retour
‚úÖ Param√®tres nomm√©s et optionnels

### R√®gles:
‚úÖ Type de retour AVANT le nom
‚úÖ `return` obligatoire si type ‚â† `void`
‚úÖ Parenth√®ses `()` obligatoires (m√™me vides)
‚úÖ Accolades `{}` d√©limitent le corps
‚úÖ Appel = nom + arguments entre `()`

---

## Aide-M√©moire Visuel

```dart
// FONCTION COMPL√àTE
returnType nomFonction(param√®tres) {
  // code
  return valeur;
}

// EXEMPLES

// 1. Void (ne retourne rien)
void afficher() {
  print('Hello');
}

// 2. Avec param√®tres
void saluer(String nom) {
  print('Bonjour $nom');
}

// 3. Avec retour
int additionner(int a, int b) {
  return a + b;
}

// 4. Param√®tres nomm√©s
void creer({required String nom, int age = 0}) {
  print('$nom, $age ans');
}

// APPELS
afficher();
saluer('Julie');
int somme = additionner(5, 3);
creer(nom: 'Marc', age: 30);
```

---

## Conseil de Professeur Exp√©riment√©

### Quand cr√©er une fonction?

**CR√âEZ une fonction si:**
- ‚úÖ Vous r√©p√©tez le m√™me code 2+ fois
- ‚úÖ Le code fait une action sp√©cifique (calculer, afficher, etc.)
- ‚úÖ Le code est complexe (fonction = simplification)
- ‚úÖ Vous voulez tester cette partie ind√©pendamment

**NE CR√âEZ PAS de fonction si:**
- ‚ùå Code utilis√© une seule fois
- ‚ùå Code tr√®s simple (1-2 lignes)
- ‚ùå Fonction trop g√©n√©rique (fait trop de choses)

**R√àGLE D'OR:** Une fonction = Une t√¢che bien d√©finie!

**Exemple:**
- ‚úÖ `calculerAire(longueur, largeur)` - t√¢che claire
- ‚ùå `faireDesTrucs()` - trop vague!

---

## Exercice Bonus : Validateur d'√Çge üéØ

### √Ä Vous de Jouer!

Cr√©ez un fichier `validateur.dart` avec:

**1. Une fonction qui v√©rifie si quelqu'un est majeur:**
```dart
bool estMajeur(int age) {
  // Retourne true si age >= 18, sinon false
}
```

**2. Une fonction qui affiche un message selon l'√¢ge:**
```dart
void afficherStatut(String nom, int age) {
  // Si majeur: "nom est majeur"
  // Sinon: "nom est mineur"
}
```

**3. Dans main(), testez avec plusieurs personnes**

**Solution cach√©e ci-dessous** ‚¨áÔ∏è

<details>
<summary>Cliquez pour voir la solution</summary>

```dart
bool estMajeur(int age) {
  return age >= 18;
}

void afficherStatut(String nom, int age) {
  if (estMajeur(age)) {
    print('$nom ($age ans) est majeur.');
  } else {
    print('$nom ($age ans) est mineur.');
  }
}

void main() {
  afficherStatut('Julie', 25);
  afficherStatut('Marc', 17);
  afficherStatut('Sophie', 18);
  afficherStatut('Thomas', 12);
}
```
</details>

---

## Pr√™t pour les Entr√©es/Sorties?

Vous savez maintenant:
- Cr√©er des fonctions
- Passer des param√®tres
- Retourner des valeurs
- R√©utiliser du code
- Organiser votre programme

**PROCHAINE √âTAPE:** Apprendre √† interagir avec l'utilisateur! üí¨

**Cliquez sur "Continuer" pour l'√âtape 3!** ‚Üí


